{% extends "base.html" %}

{% block title %}メイン画面{% endblock %}
{% block header %}メイン画面{% endblock %}

{% block content %}
{% if message %}
<div class="notification is-info">{{ message }}</div>
{% endif %}

<div class="box">
  <p class="mb-2">選択中のシリアルポート: {{ settings.serial_port or "未設定" }}</p>
  <p class="mb-4">ボーレート: {{ settings.baud_rate }}, パリティ: {{ settings.parity }}, ストップビット: {{ settings.stop_bits }}</p>
</div>

<form method="post" action="/transmit" class="box">
  <div class="field">
    <label class="label" for="payload">送信データ</label>
    <div class="control">
      <textarea class="textarea" id="payload" name="payload" placeholder="コマンドを入力してください"></textarea>
    </div>
  </div>
  <div class="field">
    <div class="control">
      <button class="button is-primary" type="submit">送信</button>
    </div>
  </div>
</form>

<div class="box">
  <h2 class="title is-5">音声ストリーム</h2>
  <audio controls preload="none" src="{{ audio_stream_url }}"></audio>
</div>
{% endblock %}
